<div class="page-table" data-bind-action="admin/news/info" data-bind-type="ajax" data-bind-callback="form-fill,news-info-fill" data-bind-data="parent">
    <form action="admin/news/save" data-bind-action="admin/news/save" data-bind-type="ajax" data-bind-callback="form-tip,success-fire" data-bind-form-tip="diag-close" data-bind-fire-target="activity-notice-list">
        <table class="post">
            <tr>
                <th>所属栏目：</th>
                <td><select name="ColID" class="txt am-form-field" data-bind-action="admin/news/columnlist" data-bind-type="ajax" data-bind-callback="select" data-bind-data="parent" data-select-value="ID" data-select-text="Name"></select></td>
            </tr>
            <tr>
                <th>标题：</th>
                <td>
                    <input type="text" name="Title" class="txt am-form-field" size="50" required="required" />
                </td>
            </tr>
            <tr>
                <th>内容：</th>
                <td>
                    <input type="hidden" name="Content" id="news-info-content" />
                </td>
            </tr>
            <tr>
                <th>封面图：</th>
                <td>
                    <img src="/images/space.gif" data-name="CoverShow" class="am-img-thumbnail" style="height:64px;" data-upload="true" />
                    <p class="am-padding-top-xs">
                        <input type="file" name="coverfile" class="txt am-form-field" />
                    </p>
                </td>
            </tr>
            <tr>
                <th></th>
                <td>
                    <input type="hidden" name="ID" value="${ID}" />
                    <input type="submit" value=" 保存 " class="am-btn am-btn-success am-round" />
                </td>
            </tr>
        </table>
    </form>
</div>

<script type="text/javascript">
    BW.callback["news-info-fill"] = function (result) {
        var t = this;
        var content = t.dom.element.getElement("[name=Content]");
        var id = "news-" + new Date().getTime();
        content.set("id", id);
        new Element("iframe", {
            "src": "controls/kindeditor.html#" + id,
            "styles": {
                "width": "100%",
                "height": 400
            }
        }).inject(content, "after");
    }
</script>